function start(){setLoginRegisterView(),loginRun(),registerRun(),swapRegisterLogic()}function loginRun(){$("#loginForm").submit(function(a){a.preventDefault(),$(".login").prop("disabled",!0);var b={username:$(".loginUser").val(),password:$(".loginPass").val()};$.ajax({method:"POST",url:"/login",data:b}).done(function(a){"fail"==a?($(".login").prop("disabled",!1),$(".loginError").show().delay(5e3).fadeOut()):$("body").html(a).promise().done(function(){0==mainPageCounter&&(mainPageLogic(),mainPageCounter++)})})})}function registerRun(){function a(a){$(".registerError").text(a),$(".registerError").show(),$(".registerError").delay(5e3).fadeOut()}$("#registerForm").submit(function(b){if(b.preventDefault(),$(".registerPass").val()!=$(".registerPass2").val()&&a("Passwords must match."),$(".registerUser").val().length<3&&a("Username must be at least 3 characters long."),($(".registerPass").val().length<5||$(".registerPass2").val().length<5)&&a("Password must be at least 5 characters long."),$(".registerUser").val().length>=3&&$(".registerPass").val().length>=5&&$(".registerPass2").val().length>=5&&$(".registerPass").val()==$(".registerPass2").val()){var c={username:$(".registerUser").val(),password:$(".registerPass").val()};$.ajax({method:"POST",url:"/register",data:c}).done(function(b){"registered"==b?a("Username is taken."):(localStorage.setItem("hasUserBeenHere",!0),$(".registerContainer").hide(),$(".suggestSwapSpan").text("If you don't have an account one you may register."),$(".suggestSwapBtn").text("Register"),$(".loginContainer, .suggestSwapBox").show(),$(".loginUser").focus(),$("#loginForm").append('<p class="regSuccess">You have sucessfully registered.</p>'),$(".regSuccess").delay(5e3).fadeOut())})}})}function setLoginRegisterView(){$(".loaderBody, .spinner").hide(),$(".logoContainer").show(),void 0==localStorage.getItem("hasUserBeenHere")?($(".suggestSwapSpan").text("If you already have an account you may login."),$(".suggestSwapBtn").text("Login"),$(".registerContainer, .suggestSwapBox").show(),$(".registerUser").focus()):($(".suggestSwapSpan").text("If you don't have an account one you may register."),$(".suggestSwapBtn").text("Register"),$(".loginContainer, .suggestSwapBox").show(),$(".loginUser").focus())}function swapRegisterLogic(){$("body").on("click",".suggestSwapBtn",function(){$(":input").val(""),"Register"==$(this).text()?($(".loginContainer").hide("clip",{complete:function(){$(".registerContainer").show("clip")}}),$(this).text("Login"),$(".suggestSwapSpan").text("If you already have an account you may login.")):"Login"==$(this).text()&&($(".registerContainer").hide("clip",{complete:function(){$(".loginContainer").show("clip")}}),$(this).text("Register"),$(".suggestSwapSpan").text("If you don't have an account one you may register."))})}$(function(){start()});