function mainPageLogic(){function a(a){$(".djQueue ul").empty(),0!=a.length?$(".noDJ").hide():$(".noDJ").show();for(var b=0;b<a.length;b++)$(".djQueue ul").append("<li>"+a[b].username+"</li>")}socket=io(),$.getScript("/scripts/youtube.min.js").done(function(){$(".chatMessages").css({"max-height":$(window).height()/3.5}),$(".djQueue ul").css({"max-height":$(window).height()/2}),$.ajax({method:"GET",url:"/djqueue"}).done(function(b){a(b)})}),window.onbeforeunload=function(){var a={username:userInfo.username};$.ajax({method:"POST",url:"/removedj",data:a}).done(function(a){console.log(a)})},$.ajax({method:"GET",url:"/userinfo"}).done(function(a){userInfo=a,console.log(userInfo)}),$("body").on("click",".logout",function(){$.ajax({method:"GET",url:"/logout"}).done(function(a){"logged out"==a&&location.reload()})}),$("body").on("click",".mainOptionsBtn",function(){$(".mainOptionsBtn").toggleClass("redBtn"),"Add Songs"==$(this).text()?($(".playlistContent").hide(),$(".addSongContent").show()):($(".playlistContent").show(),$(".addSongContent").hide())}),$(".chatInput").on("keyup",function(a){if(a.preventDefault(),13==a.which)if($(this).val().match(/^\s*$/))alert("Message cannot be blank");else{var b={userId:userInfo.username,msg:$(this).val()};socket.emit("user chat message",b),$(this).val("")}}),socket.on("user chat message",function(a){$(".chatMessages ul").append('<li><span style="color: '+a.color+';">'+a.userId+"</span>: "+a.msg+"</li>"),$(".chatMessages").scrollTop($(".chatMessages ul").height())}),$("body").on("click",".try",function(){socket.emit("play song","Ly7uj0JwgKg")}),$("body").on("click",".joinDJ",function(){var a={username:userInfo.username};$.ajax({method:"POST",url:"/joindj",data:a}).done(function(a){"joined"==a&&($(".joinDJ").hide(),$(".leaveDJ").show(),socket.emit("dj queue","run it"))})}),$("body").on("click",".leaveDJ",function(){var a={username:userInfo.username};$.ajax({method:"POST",url:"/removedj",data:a}).done(function(a){"left"==a&&($(".leaveDJ").hide(),$(".joinDJ").show(),socket.emit("dj queue","run it"))})}),socket.on("dj queue",function(){$.ajax({method:"GET",url:"/djqueue"}).done(function(b){console.log("hit"),a(b)})})}var mainPageCounter=0,socket,userInfo;